<style>
  .status-paid .status-dot {
    background: #10b981;
  }

  .status-pending .status-dot,
  .status-ongoing .status-dot {
    background: #f59e0b;
  }

  .status-cancelled .status-dot {
    background: #ef4444;
  }

  .pagination-modern span[aria-current='page'] {
    background: #ef4444;
    color: white;
    border: 1px solid #ef4444;
  }
</style>

{% paginate customer.orders by 1 %}
  <div class="flex flex-col gap-24 overflow-hidden">
    <div class="order-history-header">
      <h2 class="order-history-title m-0 ff-general-sans fs-23-lh-24-ls-0 fw-500 ">{{ 'customer.order.title' | t }}</h2>
    </div>

    {%- if customer.orders.size > 0 -%}
      <table class="order-table" role="table">
        <thead role="rowgroup">
          <tr role="row" class="h-48">
            <th
              scope="col"
              role="columnheader"
              class="pt-0 pb-0 pl-12 pr-12 fs-16-lh-16-ls-0 fw-500 ff-general-sans text-primary-70pct"
            >
              {{ 'customer.order.order_number' | t }}
            </th>
            <th
              scope="col"
              role="columnheader"
              class="pt-0 pb-0 pl-12 pr-12 fs-16-lh-16-ls-0 fw-500 ff-general-sans text-primary-70pct"
            >
              {{ 'customer.order.date' | t }}
            </th>
            <th
              scope="col"
              role="columnheader"
              class="pt-0 pb-0 pl-12 pr-12 fs-16-lh-16-ls-0 fw-500 ff-general-sans text-primary-70pct"
            >
              {{ 'customer.order.payment_type' | t }}
            </th>
            <th
              scope="col"
              role="columnheader"
              class="pt-0 pb-0 pl-12 pr-12 fs-16-lh-16-ls-0 fw-500 ff-general-sans text-primary-70pct"
            >
              {{ 'customer.order.quantity' | t }}
            </th>
            <th
              scope="col"
              role="columnheader"
              class="pt-0 pb-0 pl-12 pr-12 fs-16-lh-16-ls-0 fw-500 ff-general-sans text-primary-70pct"
            >
              {{ 'customer.order.status' | t }}
            </th>
            <th
              scope="col"
              role="columnheader"
              class="pt-0 pb-0 pl-12 pr-12 fs-16-lh-16-ls-0 fw-500 ff-general-sans text-primary-70pct"
            >
              {{ 'customer.order.total' | t }}
            </th>
            <th
              scope="col"
              role="columnheader"
              class="pt-0 pb-0 pl-12 pr-12 fs-16-lh-16-ls-0 fw-500 ff-general-sans text-primary-70pct"
            >
              {{ 'customer.order.action' | t }}
            </th>
          </tr>
        </thead>
        <tbody role="rowgroup">
          {%- for order in customer.orders -%}
            <tr role="row" class="h-48">
              <td role="cell" class="pt-0 pb-0 pl-12 pr-12">
                <a
                  href="{{ order.customer_url }}"
                  class="order-number ff-general-sans fw-600 fs-16-lh-24-ls-0 text-brand"
                >
                  #{{ order.order_number | default: order.name | remove: '#' }}
                </a>
              </td>
              <td role="cell" class="pt-0 pb-0 pl-12 pr-12">
                <span class="order-date ff-general-sans fw-400 fs-16-lh-24-ls-0">
                  {{- order.created_at | date: '%B %d, %y' -}}
                </span>
              </td>
              <td role="cell">
                <div class="payment-status ff-general-sans fw-400 fs-16-lh-24-ls-0 {% if order.financial_status == 'paid' %}status-paid{% elsif order.financial_status == 'pending' %}status-pending{% elsif order.financial_status == 'cancelled' %}status-cancelled{% else %}status-ongoing{% endif %}">
                  <span class="status-dot rounded-full  h-8 w-8"></span>
                  {{ order.financial_status_label }}
                </div>
              </td>
              <td role="cell" class="pt-0 pb-0 pl-12 pr-12">
                <span class="order-quantity ff-general-sans fw-400 fs-16-lh-24-ls-0">{{ order.line_items.size }}</span>
              </td>
              <td role="cell" class="pt-0 pb-0 pl-12 pr-12">
                <span class="order-status ff-general-sans fw-400 fs-16-lh-24-ls-0">
                  {{- order.fulfillment_status_label -}}
                </span>
              </td>
              <td role="cell" class="pt-0 pb-0 pl-12 pr-12">
                <span class="order-total ff-general-sans fw-400 fs-16-lh-24-ls-0 flex gap-4 ">
                  à§³
                  {{- order.total_net_amount | money_without_currency -}}
                </span>
              </td>
              <td role="cell" class="pt-0 pb-0 pl-12 pr-12">
                <div class="order-actions">
                  <a href="{{ order.customer_url }}" class="action-btn view-btn text-brand" title="View Order">
                    {% render 'eye-icon' %}
                  </a>
                </div>
              </td>
            </tr>
          {%- endfor -%}
        </tbody>
      </table>

    {%- else -%}
      <div class="no-orders">
        <p class="ff-general-sans fs-23-lh-24-ls-0 fw-600  text-center">
          {{ 'customer.order.none' | t }}
        </p>
      </div>
    {%- endif -%}

    {%- if paginate.pages > 1 -%}
      <div class="pagination-modern flex justify-center pt-24">
        <nav role="navigation" aria-label="{{ 'general.pagination.label' | t }}">
          <ul role="list" class="flex gap-8 m-0 p-0 list-style-none">
            {%- if paginate.previous -%}
              <li>
                <a
                  href="{{ paginate.previous.url }}#orders-section"
                  class="pagination-link flex items-center justify-center h-32 w-32 rounded-6 no-underline ff-general-sans fw-400 fs-16-lh-24-ls-0"
                  aria-label="{{ 'general.pagination.previous' | t }}"
                >
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="15,18 9,12 15,6"></polyline>
                  </svg>
                </a>
              </li>
            {%- endif -%}

            {%- for part in paginate.parts -%}
              <li>
                {%- if part.is_link -%}
                  <a
                    href="{{ part.url }}#orders-section"
                    class="pagination-link flex items-center justify-center h-32 w-32 rounded-6 no-underline ff-general-sans fw-400 fs-16-lh-24-ls-0"
                    aria-label="{{ 'general.pagination.page' | t: number: part.title }}"
                  >
                    {{- part.title -}}
                  </a>
                {%- else -%}
                  {%- if part.title == paginate.current_page -%}
                    <span
                      aria-current="page"
                      aria-label="{{ 'general.pagination.page' | t: number: part.title }}"
                      class="flex items-center justify-center h-32 w-32 rounded-6 no-underline ff-general-sans fw-400 fs-16-lh-24-ls-0"
                    >
                      {{- part.title -}}
                    </span>
                  {%- else -%}
                    <span class="flex items-center justify-center h-32 w-32 rounded-6 no-underline ff-general-sans fw-400 fs-16-lh-24-ls-0">
                      {{- part.title -}}
                    </span>
                  {%- endif -%}
                {%- endif -%}
              </li>
            {%- endfor -%}

            {%- if paginate.next -%}
              <li>
                <a
                  href="{{ paginate.next.url }}#orders-section"
                  class="pagination-link flex items-center justify-center h-32 w-32 rounded-6 no-underline ff-general-sans fw-400 fs-16-lh-24-ls-0"
                  aria-label="{{ 'general.pagination.next' | t }}"
                >
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="9,18 15,12 9,6"></polyline>
                  </svg>
                </a>
              </li>
            {%- endif -%}
          </ul>
        </nav>
      </div>
    {%- endif -%}
  </div>

  <script>
    // Handle pagination clicks to stay on orders section
    document.addEventListener('DOMContentLoaded', function () {
      const paginationLinks = document.querySelectorAll('.pagination-link');

      paginationLinks.forEach((link) => {
        link.addEventListener('click', function (e) {
          e.preventDefault();
          const url = this.href;

          // Load the new page and show orders section
          window.location.href = url;

          // After page loads, ensure orders section is shown
          setTimeout(() => {
            if (window.showAccountContent) {
              window.showAccountContent('orders');
            }
          }, 100);
        });
      });

      // Check if we came from pagination and show orders
      if (window.location.hash === '#orders-section') {
        if (window.showAccountContent) {
          window.showAccountContent('orders');
        }
      }
    });
  </script>
{% endpaginate %}
