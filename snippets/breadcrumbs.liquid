{% comment %}
  Renders breadcrumbs for product pages only
  
  Usage:
  {% render 'breadcrumbs' %}
  
  Format: icon -> collection name -> product name
{% endcomment %}

{% if template == 'product' %}
  <nav class="breadcrumbs pt-16 pb-16" role="navigation" aria-label="breadcrumbs">
    <ol class="breadcrumbs__list flex flex-wrap items-center gap-12 p-0">
      
      {% comment %} Home icon {% endcomment %}
      <div class="flex gap-10 items-center">
        {% render "icon-home", cls: "w-28 h-28" %}
      </div>

      {% comment %} Collection name {% endcomment %}
      {% if collection %}
        <li class="breadcrumbs__item list-style-none flex items-center gap-12">
          {% render "icon-arrow-thin", cls: "svg-primary-optional" %}
          <a href="{{ collection.url }}" class="breadcrumbs__link fw-500 fs-14-lh-20-ls-0_1 text-primary-optional">
            {{ collection.title }}
          </a>
        </li>
      {% elsif product.collections.size > 0 %}
        <li class="breadcrumbs__item list-style-none flex items-center gap-12">
          {% render "icon-arrow-thin", cls: "svg-primary-optional" %}
          <a href="{{ product.collections.first.url }}" class="breadcrumbs__link fw-500 fs-14-lh-20-ls-0_1 text-primary-optional">
            {{ product.collections.first.title }}
          </a>
        </li>
      {% endif %}
      
      {% comment %} Product name - only show arrow if product has collections {% endcomment %}
      <li class="breadcrumbs__item list-style-none flex items-center gap-12">
        {% if product.collections.size > 0 %}
          {% render "icon-arrow-thin", cls: "svg-primary-optional" %}
        {% endif %}
        
        {% comment %} Full product title for desktop {% endcomment %}
        <span class="breadcrumbs__text fw-500 fs-14-lh-20-ls-0_1 text-primary-optional block sm:hidden" aria-current="page">
          {{ product.title }}
        </span>
        
        {% comment %} Truncated product title for mobile {% endcomment %}
        <span class="breadcrumbs__text fw-500 fs-14-lh-20-ls-0_1 text-primary-optional hidden sm:block" aria-current="page">
          {% assign words = product.title | split: ' ' %}
          {% if words.size > 4 %}
            {{ words.first }}... {{ words[-3] }} {{ words[-2] }} {{ words[-1] }}
          {% else %}
            {{ product.title }}
          {% endif %}
        </span>
      </li>

    </ol>
  </nav>
{% endif %}