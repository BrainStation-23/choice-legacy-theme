<style>
  @media screen and (min-width: 769px) {
    .combo-banner-{{ section.id }} .swiper-slide {
      border-radius: {{ section.settings.slide_border_radius }}px;
    }
  }
</style>

<div class="combo-banner combo-banner-{{ section.id }} relative pt-0 pb-0">
  {% for block in section.blocks %}
    <div class="swiper-slide relative transition-transform h-508 sm:h-180 sm:rounded-0 {% unless block.settings.mobile_image %}slide-no-mobile-image{% endunless %}" 
          {{ block.shopify_attributes }}
          data-block-id="{{ block.id }}"
          data-block-type="{{ block.type }}">
      
        {% if block.settings.image != blank %}
          {% if block.settings.link != blank %}
            <a href="{{ block.settings.link }}"{% if block.settings.link_target %} target="_blank" rel="noopener"{% endif %}>
          {% endif %}
          {%- capture sizes %}{% render 'sizes-attribute', grid: true, min: 1, sm: 1, lg: 1, xl: 1 %}{% endcapture -%}
          {%- liquid
              assign img = block.settings.image
              assign m_img = block.settings.mobile_image
            -%}
            {%- render 'image-desktop-and-mobile',
              class: 'img-fit',
              desktop_image: img,
              mobile_image: m_img,
              src_width_mobile: 980,
              widths_mobile: '480, 980, 1200, 1400',
              src_width_desktop: 1440,
              widths_desktop: '480, 980, 1200, 1440, 1600, 1920, 2560, 3200',
              lazy_load: true,
              fetchpriority: "high",
              sizes: sizes,
              block: block
          -%}
          {% if block.settings.link != blank %}</a>{% endif %}
        {% else %}
        {% assign image_number = forloop.index0 | modulo: 2 | plus: 1 %}
        {{ "lifestyle-" | append: image_number | placeholder_svg_tag: "placeholder-svg" }}
        {% endif %}
    </div>
  {% endfor %}
</div>

{% schema %}
{
  "name": "Combo Banner",
  "tag": "section",
  "class": "section",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "header",
      "content": "Visual Settings"
    },
    {
      "type": "range",
      "id": "slide_border_radius",
      "min": 0,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Desktop border radius",
      "default": 0,
      "info": "Rounded corners for desktop view (mobile is always 0)"
    }
  ],
  "max_blocks": 1,
  "blocks": [
    {
      "type": "banner",
      "name": "Banner Image",
      "limit": 8,
      "settings": [
        {
          "type": "header",
          "content": "Banner Images"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Desktop Banner Image",
          "info": "Recommended size: 1400x400px or larger"
        },
        {
          "type": "image_picker",
          "id": "mobile_image",
          "label": "Mobile Banner Image (Optional)",
          "info": "Recommended size: 800x250px. If not provided, desktop image will be used."
        },
        {
          "type": "header",
          "content": "Link Settings"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Banner Link (Optional)",
          "info": "Makes the entire banner clickable"
        },
        {
          "type": "checkbox",
          "id": "link_target",
          "label": "Open link in new tab",
          "default": false
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Combo Banner",
      "blocks": [
        {
          "type": "banner",
        }
      ]
    }
  ]
}
{% endschema %}