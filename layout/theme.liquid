{%- liquid
  assign rtl = false
  assign rtl_iso_codes = 'ar,arc,dv,fa,ha,he,khw,ks,ku,ps,ur,yi' | split: ','
  assign current_code_first_part = localization.language.iso_code | split: '-' | first

  if rtl_iso_codes contains current_code_first_part
    assign rtl = true
  endif

  assign body_font_bold = settings.body_font | font_modify: 'weight', 'bolder'
  assign body_font_italic = settings.body_font | font_modify: 'style', 'italic'
  assign body_font_bold_italic = body_font_bold | font_modify: 'style', 'italic'
-%}
<!doctype html>
<html class="no-js" lang="{{ request.locale.iso_code }}" dir="{% if rtl %}rtl{% else %}ltr{% endif %}">
<head>
  {%- render 'doc-head-core' -%}
  {%- render 'doc-head-social' -%}

  <link rel="preload" href="{{ 'main.css' | asset_url }}" as="style">

  {%- style %}
    {{- settings.body_font | font_face: font_display: 'swap' -}}
    {{- body_font_bold | font_face: font_display: 'swap' -}}
    {{- body_font_italic | font_face: font_display: 'swap' -}}
    {{- body_font_bold_italic | font_face: font_display: 'swap' -}}
    {{- settings.heading_font | font_face: font_display: 'swap' -}}

    :root {
      --color-background: {{ settings.bg_color.red }}, {{ settings.bg_color.green }}, {{ settings.bg_color.blue }};
      --color-primary-text: {{ settings.primary_text_color.red }}, {{ settings.primary_text_color.green }}, {{ settings.primary_text_color.blue }};
      --color-primary-label: {{ settings.primary_label_color.red }}, {{ settings.primary_label_color.green }}, {{ settings.primary_label_color.blue }};
      --color-secondary-text: {{ settings.secondary_text.red }}, {{ settings.secondary_text.green }}, {{ settings.secondary_text.blue }};
      --color-primary-brand: {{ settings.primary_brand_color.red }}, {{ settings.primary_brand_color.green }}, {{ settings.primary_brand_color.blue }};
      --color-secondary-brand: {{ settings.secondary_brand_color.red }}, {{ settings.secondary_brand_color.green }}, {{ settings.secondary_brand_color.blue }};
    
      .color-scheme {
        background: rgb(var(--color-background));
        color: rgb(var(--color-primary-text));
      }

      --heading-font-family: {{ settings.heading_font.family }}, {{ settings.heading_font.fallback_families }};
      --heading-font-style: {{ settings.heading_font.style }};
      --heading-font-weight: {{ settings.heading_font.weight }};

      --body-font-family: {{ settings.body_font.family }}, {{ settings.body_font.fallback_families }};
      --body-font-style: {{ settings.body_font.style }};
      --body-font-weight: {{ settings.body_font.weight }};

      --navigation-font-family: {{ settings.link_font.family }}, {{ settings.link_font.fallback_families }};
      --navigation-font-style: {{ settings.link_font.style }};
      --navigation-font-weight: {{ settings.link_font.weight }};
    }
     
  {% endstyle -%}

  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet" />
  <link rel="stylesheet" href="{{ 'main.css' | asset_url }}">
  <script src="{{ 'main.js' | asset_url }}" defer="defer"></script>

  {%- unless settings.body_font.system? -%}
    <link rel="preload" href="{{ settings.body_font | font_url }}" as="font" type="font/woff2" crossorigin fetchpriority="high">
  {%- endunless -%}

  {%- unless settings.heading_font.system? -%}
    <link rel="preload" href="{{ settings.heading_font | font_url }}" as="font" type="font/woff2" crossorigin fetchpriority="high">
  {%- endunless -%}

  {%- if request.page_type contains 'customers' -%}
    <link rel="stylesheet" href="{{ 'customer.css' | asset_url }}">
  {%- endif -%}

  {%- if settings.swatch_colors != blank -%}
    <link rel="stylesheet" href="{{ 'swatches.css' | asset_url }}" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="{{ 'swatches.css' | asset_url }}"></noscript>
  {%- endif -%}

  {{ content_for_header }}

  {%- if request.design_mode -%}
    <script src="{{ 'theme-editor.js' | asset_url }}" defer="defer" data-contact="{{ shop.email | escape }}"></script>
  {%- endif -%}

  {% if settings.animations_enabled != "disabled" %}
    <script src="{{ 'animate-on-scroll.js' | asset_url }}" defer="defer"></script>
    <link rel="stylesheet" href="{{ 'animate-on-scroll.css' | asset_url }}">
  {% endif %}

  <script>document.documentElement.className = document.documentElement.className.replace('no-js', 'js');</script>

  {%- if settings.custom_html_head -%}
    <!-- CC Custom Head Start -->
    {{- settings.custom_html_head -}}
    <!-- CC Custom Head End -->
  {%- endif -%}
</head>

<body class='{% if settings.animations_enabled != "disabled" %} cc-animate-enabled"{% endif %} color-scheme'>
  <a class="skip-link btn btn--primary visually-hidden" href="#main-content" data-ce-role="skip">
    {{- 'accessibility.skip_to_content' | t -}}
  </a>

  {%- sections 'header-group' -%}

  <main id="main-content">
    {{ content_for_layout }}
  </main>

  {%- sections 'overlay-group' -%}
  {%- sections 'footer-group' -%}

  {%- liquid
    if settings.enable_quick_add
      render 'quick-add-drawer'
    endif
  -%}

  <div class="overlay fixed top-0 right-0 bottom-0 left-0 js-overlay"></div>
  <script>
    window.theme = {
      info: {
        name: 'Enterprise',
        version: '1.6.2'
      },
      mediaQueries: {
        sm: '(min-width: 600px)',
        md: '(min-width: 769px)',
        lg: '(min-width: 1024px)',
        xl: '(min-width: 1280px)',
        xxl: '(min-width: 1536px)',
        portrait: '(orientation: portrait)'
      },
      device: {
        hasTouch: window.matchMedia('(any-pointer: coarse)').matches,
        hasHover: window.matchMedia('(hover: hover)').matches
      },
      routes: {
        cart: '{{ routes.cart_url }}',
        cartAdd: '{{ routes.cart_add_url }}',
        cartChange: '{{ routes.cart_change_url }}',
        cartUpdate: '{{ routes.cart_update_url }}',
        predictiveSearch: '{{ routes.predictive_search_url }}'
      },
      settings: {
        moneyWithCurrencyFormat: {{ shop.money_with_currency_format | json }},
        sliderItemsPerNav: '{{ settings.slider_items_per_nav }}',
        compareToggle: {{ settings.compare_toggle | json }},
        compareShowEmptyMetafields: {{ settings.compare_show_empty_metafields | json }},
        afterAtc: {{ settings.after_add_to_cart | json }},
        cartType: {{ settings.cart_type | json }}
      },
      strings: {
        addCartNote: '{{ "cart.note.add" | t }}',
        editCartNote: '{{ "cart.note.edit" | t }}',
        cartError: '{{ "cart.general.error" | t }}',
        cartQtyError: '{{ "cart.items.quantity_error" | t: quantity: "[quantity]" }}',
        cartTermsConfirmation: '{{ "cart.terms.confirmation" | t }}',
        imageAvailable: '{{ "products.product.media.image_available" | t: index: "[index]" }}',
        veryLowStock: '{{ 'products.inventory.very_low_stock' | t }}',
        lowStock: '{{ 'products.inventory.low_stock' | t }}',
        inStock: '{{ 'products.inventory.in_stock' | t }}',
        noStock: '{{ "products.variant.no_stock" | t }}',
        noVariant: '{{ "products.variant.non_existent" | t }}',
        noSelectedVariant: '{{ "products.variant.not_selected" | t }}',
        onlyXLeft: '{{ "products.inventory.only_x_left" | t: quantity: "[quantity]" }}',
        awaitingSale: '{{ "products.product.awaiting_sale" | t }}',
        shippingCalculator: {
          singleRate: '{{ "cart.shipping_calculator.single_rate" | t }}',
          multipleRates: '{{ "cart.shipping_calculator.multiple_rates" | t }}',
          noRates: '{{ "cart.shipping_calculator.no_rates" | t }}'
        },
        viewDetails: '{{ "products.product.view_details" | t }}',
        compare: {
          limit: '{{ 'products.compare.drawer.limit_reached' | t: quantity: '[quantity]' }}',
          more: '{{ 'products.compare.drawer.select_more' | t }}',
          empty: '{{ 'products.compare.drawer.empty' | t }}',
          continue: '{{ 'products.compare.drawer.close_continue' | t }}'
        },
        discountCopyFail: '{{ 'general.discount_code.copy_fail' | t }}',
        articleReadTime: '{{ 'blogs.article.reading_time' | t }}',
        quickNav: {
          button_standard: '{{ 'general.quick_navigation_panel.button_label' | t }}',
          show_products_none: '{{ 'general.quick_navigation_panel.show_products_none' | t }}',
          button_one: '{{ 'general.quick_navigation_panel.show_products_one' | t: quantity: '[quantity]' }}',
          button_other: '{{ 'general.quick_navigation_panel.show_products_other' | t: quantity: '[quantity]' }}',
        },
      },
      scripts: {
        cartItems: '{{ "cart-items.js" | asset_url }}',
        countryProvinceSelector: '{{ "country-province-selector.js" | asset_url }}',
        shippingCalculator: '{{ "shipping-calculator.js" | asset_url }}'
      }
    };
    window.APP_SUB_PATH = "generic-name"
    {% if customer %}
      window.customerLoggedIn = true;
      window.customerId = {{ customer.id }};
    {% else %}
      window.customerLoggedIn = false;
      window.customerId = null;
    {% endif %}
    window.shopDomain = '{{ shop.domain }}';
  </script>
  <script src="{{ 'wishlist.js' | asset_url }}" defer></script>
</body>
</html>
